<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css"/>
    <link rel="stylesheet" href="./fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="css/general_styles.css"/>
    <link rel="stylesheet" href="css/custom_styles/assignment-configuration.css" />
    <title>Document</title>
</head>

<!--Index Button-->
<div class="header">
    <a class="index-container" href="index.html">
        <img src="images/header-bg-short-arrow.png" />
            <p>Index</p>
    </a>
    <div class="file-container">
        <p id="assignment-text">Assignment File:test.zip</p>
    </div>
</div>

<!-- Windows -->
<div class="container">

    <div class="testcase-container">
        <div class="plusIcon-container">
            <i class="fas fa-plus-square text-primary fa-lg"></i>
            <i class="fas fa-minus-square text-danger fa-lg"></i>
        </div>

        
        <div id="dropdown-container">
            <select name="testcase-files" id="files">
                <option value="testcase01.c">testcase01.c</option>
            </select>
        </div>

        <div class="scroll-container">
            <img class="scrollbar" src="images/scrollbar.png" />
            <div class="frame-container">
                <div class="header-container">
                    <img src="images/testcase configuration.png" />
                    <p>Testcase Code</p>
                </div>
                <img class="custom-border" src="images/border_small.png" />
                <div class="content-container">
                    <textarea id="code-text-field" cols="40" rows="20" placeholder="test code here."></textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="scroll-container">
            <img class="scrollbar" src="images/scrollbar.png" />
            <div class="frame-container">
                <div class="header-container">
                    <img src="images/testcase configuration.png" />
                    <p>Testcase Configuration</p>
                </div>
                <img class="custom-border" src="images/border_small.png" />
                <div class="content-container">
                    <div>Max runtime: <input type="text" /> seconds</div>

                    <div class="checkbox-containers">
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox1" />
                            <label for="checkbox1"></label>
                            <p class="checkbox_label">Field 1</p>
                        </div>

                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox2" />
                            <label for="checkbox2"></label>
                            <p class="checkbox_label">Field 2</p>
                        </div>

                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox3" />
                            <label for="checkbox3"></label>
                            <p class="checkbox_label">Field 3</p>
                        </div>

                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox4" />
                            <label for="checkbox4"></label>
                            <p class="checkbox_label">Field 4</p>
                        </div>

                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox5" />
                            <label for="checkbox5"></label>
                            <p class="checkbox_label">Field 5</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox6" />
                            <label for="checkbox6"></label>
                            <p class="checkbox_label">Field 6</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox7" />
                            <label for="checkbox7"></label>
                            <p class="checkbox_label">Field 7</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox8" />
                            <label for="checkbox8"></label>
                            <p class="checkbox_label">Field 8</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox9" />
                            <label for="checkbox9"></label>
                            <p class="checkbox_label">Field 9</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox10" />
                            <label for="checkbox10"></label>
                            <p class="checkbox_label">Field 10</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox11" />
                            <label for="checkbox11"></label>
                            <p class="checkbox_label">Field 11</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox12" />
                            <label for="checkbox12"></label>
                            <p class="checkbox_label">Field 12</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox13" />
                            <label for="checkbox13"></label>
                            <p class="checkbox_label">Field 13</p>
                        </div>
                        <div class="checkbox-container">
                            <input type="checkbox" class="check_box" id="checkbox13" />
                            <label for="checkbox13"></label>
                            <p class="checkbox_label">Field 13</p>
                        </div>                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!--Footer -->
<div class="footer">
        <a id="export-container" class="export-container">
            <img src="images/export_bg.png" />
            <p>Export</p>
        </a>

        <a class="grading-container" href="grade-configuration1.html">
        <img src="images/Grading_bg.png" />
        <p>Grading</p>
        </a>
</div>

<script>
    window.$ = window.jQuery = require("./js/jquery-3.6.0.min.js");
</script>
<script src="js/bootstrap.min.js" ></script>

<script>
    const {ipcRenderer} = require('electron');
    console.log(sessionStorage.getItem("index-directory"));
    document.querySelector(".file-container").style = "display:none;";

    if(sessionStorage.getItem("index-directory") != null)
    {
        document.querySelector(".file-container").style = "display:block;";
        document.querySelector("#assignment-text").innerHTML = "Assignment File: " + sessionStorage.getItem("index-baseFile");
    let fileDropDown = document.getElementById("files");
    let fileZipPath = sessionStorage.getItem("index-directory");
    let textField = document.getElementById("code-text-field");
    let exportButton = document.getElementById("export-container");
    ipcRenderer.send('file-dropDown', fileZipPath);

    let filesArray = [];

    ipcRenderer.on('file-dropDown-response', (e,args) =>{
        filesArray = args;
        let output = "";
        filesArray.forEach(file => {
            output+= `<option value=${file.name}>${file.name}</option>`;
        })
        fileDropDown.innerHTML = output;
        textField.value = filesArray[0].body;
    });

    fileDropDown.addEventListener("change", (e) =>{
        textField.value = filesArray[fileDropDown.selectedIndex].body;
    });

    exportButton.addEventListener("click",(e)=>{
        ipcRenderer.send('export-file',filesArray,sessionStorage.getItem("index"));
    });

    textField.addEventListener("change", (e)=>{
        filesArray[fileDropDown.selectedIndex].body = textField.value;
    })

    }
   

    
</script>


</body>

</html>